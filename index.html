<!DOCTYPE html>
<html lang="en">
<head>
	<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script type="text/javascript" src="Disk.js"></script>
	<script type="text/javascript" src="Peg.js"></script>
	<script type="text/javascript" src="Game.js"></script>
	<script type="text/javascript" src="DOMTextDisplay.js"></script>
	<script type="text/javascript" src="DOMGraphicDisplay.js"></script>
	<script type="text/javascript" src="PegDisplay.js"></script>
	<script type="text/javascript" src="ConsoleDisplay.js"></script>
	<script type="text/javascript" src="AI.js"></script>
	<script type="text/javascript" src="../Core/EventRegistry.js"></script>
	<script type="text/javascript" src="../Core/jQuery.js"></script>
	<script>
		function DOMDisplayController(game,domdisplay){
			this.game=game;
			this.display=domdisplay;
		}
	</script>
	<script type="text/javascript">
		var game = new Game(4);
		var domdisplay;
		var ai = new AI(game,{'loopDelay':500});
		window.onload = function(){
			var towerContainer = document.getElementById('towers'); 
			domtextdisplay = new DOMTextDisplay(game, towerContainer);
			domtextdisplay.display();
			//domgraphicdisplay = new DOMGraphicDisplay(game, towerContainer);
			//domgraphicdisplay.display();

			//add a restart button
			var restartBtn=document.createElement('button');
			restartBtn.innerHTML = 'Restart';
			towerContainer.appendChild(restartBtn);
			restartBtn.addEventListener('click',function(){
				game.restart();
			});

			//add a button to start AI.. be sure to hide the button when we don't want the user starting AI
			var aiBtn = document.createElement('button');
			aiBtn.innerHTML = 'Activate AI';
			towerContainer.appendChild(aiBtn);
			aiBtn.style.display = 'block';
			aiBtn.addEventListener('click',function(){
				aiBtn.style.display = 'none';	
				ai.solve();
			});
			EventRegistry.addListener(game, 'move_success', function(){
				aiBtn.style.display = 'none';
			});
			EventRegistry.addListener(game, 'restarted', function(){
				aiBtn.style.display = 'block';
			});
		};
	</script>
	<style>
		.PegTextArea {
			cursor: pointer;
			resize: none;
		}
		.PegTextArea.selected {
			background:black;
			color:white;
		}

	</style>
</head>
<body>
	<h1>Towers of Hanoi</h1>
	<div id="towers"></div>
</body>
</html>
